# dashboard.io
Dashboard
いいですね、その2アイデアはどちらも「ディスパージョン（銘柄間のばらつき）を取りにいく」設計で、同じ土台で同時検証できます。すぐ回せる単一ファイルのバックテスト基盤を用意しました。キャンバス右側に置いたので、そのまま保存→実行してください（crypto_dispersion_momentum_backtest.py）。

何を検証するか（設計の要点）

ベンチマーク：対象銘柄の等ウェイト指数（簡単&ロバスト）。

推定：指数に対するEWMAベータ/相関（ノイズ低減）。

ニュートラル化：ドル中立＋ベータ中立の2制約を毎バーで射影。

コスト：手数料＋スリッページをターンオーバー×bpsで控え目に控除。

比較：同一ユニバース・同一コストで
A) 相関デカップリング→平均回帰（売り強・買いその他）
B) フローモメンタム→強買い・弱売り（価格×出来高）

使い方（最短）

取引所ごとに銘柄CSVを用意（timestamp,open,high,low,close,volume）。例：data/BTC.csv …

実行:

python crypto_dispersion_momentum_backtest.py --data_dir ./data --symbols BTC,ETH,SOL,BNB,XRP --timeframe 1H


データがまだ無ければデモで形だけ確認：

python crypto_dispersion_momentum_backtest.py --demo


出力：out/ に

pnl.csv（両戦略のPnL）、

weights_*.csv（時点別ウェイト）、

equity_*.png（カーブ）
とコンソールのシャープ、最大DD、日次平均ターンオーバー等を保存。

実装の中身（簡潔）

Decoupling-MeanReversion

ρ_i(t) を指数とのEWMA相関、Δρ = ρ_i(t)−ρ_i(t−L)。

ベータで説明できない残差リターンのzスコアが+で、かつΔρ≪0（“総合との相関を落として上昇”）→その銘柄をショート、その他をロングで中立化。逆シグナルも対称。

強さ＝|残差z|×|Δρ|（非線形強調も可）。

Flow-Persistence Momentum

1/3/7日相当の相対リターンを加重合成＋出来高サプライズ（現行vsEWMA）。

クロスセクションzでスコア→上位ロング・下位ショート。

中立化：毎バー、希望ウェイトを**（1’w=0, β’w=0）**の二制約に直交射影し、上限|w_i|≤10%を適用。

費用：fee_bps + slip_bps をターンオーバーに乗算して差引。

次の一手（精度アップの余地）

相関の頑健化：Δρの代わりに残差ボラ比や距離相関、Kalman βに差し替え可。

強さ指標の拡張：資金調達レート, OI, ネットフロー（入手可能なら）をモメンタム側にブレンド。

域値最適化：ウォークフォワードで z_resid_entry, d_corr_entry, lookbacks をグリッド/BO最適化。

リスク制御：銘柄・テーマのバケット上限、ボラ・パリティの重み、タイムストップ（例：48バー）を付与。

必要なら、あなたのBybit / Hyperliquidの1m/5m OHLCVリーダをこの基盤に直結する形で追記します（資金調達レートやOIのCSVも読めるフックは既に入れてあります）。このまま検証を走らせて、結果（pnl.csvやグラフ）を貼ってくれれば、パラメータ調整と有意性テスト（t統計・IS/OOS分割）まで詰めます。
